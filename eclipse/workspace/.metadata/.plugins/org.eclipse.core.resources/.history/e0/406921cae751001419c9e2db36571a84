package chara;

import application.Main;


public class Kei extends AbstractChara {
	private boolean vectorLeft = false;
	
	private final double NO_TARGET = -1.0;
	private final double MOVE_STEP = 5.0;
	private double targetX = NO_TARGET;
	private double targetY = NO_TARGET;

	public void move(){
		double cx = this.getX(), cy = this.getY();

		if(targetX == NO_TARGET && targetY == NO_TARGET){
			this.setX(vectorLeft ? cx-MOVE_STEP : cx+MOVE_STEP);

			if(getX() <= 0 || Main.SCREEN_WIDTH <= getX()){
				vectorLeft = !vectorLeft;
				this.setScaleX(-this.getScaleX());  // 画像反転
			}
		}else{
			if(cx != targetX){
				this.setX( cx < targetX ? cx+MOVE_STEP : cx-MOVE_STEP );
				if(targetX - 10.0 <= getX() && getX() <= targetX + 10.0){
					this.setX(targetX);
				}
			}
			if(cy != targetY){
				this.setY( cy < targetY ? cy+MOVE_STEP : cy-MOVE_STEP );	
				if(targetY - 10.0 <= getY() && getY() <= targetY + 10.0){
					this.setY(targetY);
				}
			}
			if(getX() == targetX && getY() == targetY){
				targetX = targetY = NO_TARGET;
			}
		}
	}

	@Override
	public void moveTo(double x, double y) {
		this.targetX = x;
		this.targetY = y;
	}

}
